<!DOCTYPE HTML>
<html>
<head>
<title>Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>

<!-- Bootstrap Core CSS -->
<link href="../css/bootstrap.css" rel='stylesheet' type='text/css' />

<!-- Custom CSS -->
<link href="../css/style.css" rel='stylesheet' type='text/css' />

<!-- font-awesome icons CSS -->
<link href="../css/font-awesome.css" rel="stylesheet"> 
<!-- //font-awesome icons CSS-->

<!-- side nav css file -->
<link href='../css/SidebarNav.min.css' media='all' rel='stylesheet' type='text/css'/>
<!-- //side nav css file -->
 
 <!-- js-->
<script src="../js/jquery-1.11.1.min.js"></script>
<script src="../js/modernizr.custom.js"></script>

<!--webfonts-->
<link href="http://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i&amp;subset=cyrillic,cyrillic-ext,latin-ext" rel="stylesheet">
<!--//webfonts--> 

<!-- chart -->
<script src="../js/Chart.js"></script>
<!-- //chart -->

<!-- Metis Menu -->
<script src="../js/metisMenu.min.js"></script>
<script src="../js/custom.js"></script>
<link href="../css/custom.css" rel="stylesheet">
<!--//Metis Menu -->

<!--pie-chart --><!-- index page sales reviews visitors pie chart -->
<script src="../js/pie-chart.js" type="text/javascript"></script>
<link href="../assets/drag/bootstrap-3.3.7/bootstrap/css/bootstrap.css" rel="stylesheet">

<link  href="../assets/vendor/toastr/toastr.min.css" rel="stylesheet"/>
<script src="../assets/vendor/toastr/toastr.min.js"></script>
 
</head> 
<body class="cbp-spmenu-push" style="width:100%;">
	<div class="sticky-header header-section " th:replace="head::head">	</div>
<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1" th:replace="menu::menu">	</div>	
		
		<div id="page-wrapper" >
			<!--您需要引入必要的少量依赖，方可100%预览此html,加qq群648595928获取必要依赖包(群共享文件-如何让布局器跑起来.zip)-->
<div id="accordion-magical-coder-auto-id-1564364871048" class="panel-group" role="tablist" aria-multiselectable="true" style="margin-top: 20px; margin-left: 25px; margin-right: 25px;">
    <div class="panel panel-default">
        <div class="panel-heading" role="tab">
            <h4 class="panel-title">
                <a role="button"   href="#collapseOne-magical-coder-auto-id-1564364870633" aria-expanded="false" class="collapsed">角色查询 Role of query</a>
            </h4>
        </div>
        <div  class="panel-collapse collapse in" role="tabpanel" aria-expanded="false" >
            <div class="panel-body" style="height: 107px;">
				<form action="">
	                <!--  <div class="row">   
						<div class="col-md-3 col-xs-3"> 状态 status </div>
					</div> -->
					<div class="row"> 
	                   <div class="col-xs-3">
	                        <select class="form-control  searchVal2" name="" th:value="${role?.isActive}">
	                        		<option value="2">全选</option>
									<option value="1" th:selected="${role?.isActive }==1">停用</option>
									<option value="0" th:selected="${role?.isActive }==0">启用</option>
							</select>
	                    </div>
	                    <div class="col-md-3 col-xs-3"><button type="button" class="btn btn-primary" style="margin-top: 0px; margin-right: 20px;" id="btn_select">查询select</button> </div>
	                </div>
                </form>
                				
                
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading" role="tab">
            <h4 class="panel-title">
                <a class="" role="button" data-toggle="collapse"  href="#collapseTwo-magical-coder-auto-id-1564364869430" aria-expanded="true">角色列表 Role list</a>
            </h4>
        </div>
        <div  class="panel-collapse collapse in" role="tabpanel" aria-expanded="true">
            <div class="panel-body" style="height: auto;" mc-ace="~">

                <div class="table-responsive">
                    <table class="table">
                        <thead>
					<tr>
						<th>编号</th>
						<th>角色名称 Role name</th>
						<th>状态 Status</th>
						<th>操作 Operation</th>
					</tr>
				</thead>
				<tbody>
					<th:block th:if="${pageInfo.list != null}">
						<tr th:each="role,roleStart: ${pageInfo.list}">
							<td th:text="${roleStart.count}">560001</td>
							<td th:text="${role?.name}" value="${role?.name}">Bangalore</td>
							<td th:text="${role.isActive>0?'禁用' :'启用'}" th:style="${role.isActive>0?'color:red' :'color:green'}" >560001</td>
							<td>
									
                                <button type="button" class="btn btn-primary btn-lg update" data-toggle="modal" th:title="${role.id}"
                                data-target="#magicalcoderMyModal-magical-coder-auto-id-1564365300654" style="font-size: 10px; padding: 3px 10px;">
                                    		编辑 edit
                                </button>
                                
                                <button type="button" class="btn btn-primary btn-lg update_auth" data-toggle="modal"   th:title="${role.id}"
									data-target="#magicalcoderMyModal-magical-coder-auto-id-1564365300654" style="font-size: 10px; padding: 3px 10px;">
                                    		 Role Authorization
                                </button>
                                
                                
							</td>
						</tr>
					</th:block>
				</tbody>
                    </table>
                </div>

                <nav aria-label="分页" class="pull-right">
                    <ul class="pagination">
                        <li>
                            <a href="#" aria-label="上一页">
                                <span aria-hidden="true">«</span>
                            </a>
                        </li>
                        <li class="disabled"><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li class="active"><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li>
                            <a href="#" aria-label="下一页">
                                <span aria-hidden="true">»</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
		</div>
	<!-- new added graphs chart js-->
<div id="footer" class="container" th:replace="foot::foot"></div>

<div class="modal fade" id="magicalcoderMyModal-magical-coder-auto-id-1564365300654" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="display: none;">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="">×</span></button>
                                                <h4 class="modal-title" id="myModalLabel">编辑角色 Editing the role</h4>
                                            </div>
                                            <form action="" method="post" class="form roleform">
                                            <div class="form-group">
													<input type="number" class="form-control id hidden">
												</div>
                                            <div class="modal-body">
                                                <div class="row" style="margin-left: 5px; margin-right: 5px;">
													<div class="col-xs-6">
														角色名称 role name
													</div>
													<div class="col-xs-6">
														状态 status
													</div>
													<div class="col-xs-6">
														<input type="text" class="form-control name" aria-describedby="emailHelp">
													</div>
													<div class="col-xs-6">
														<select class="form-control  isActive" name="isActive">
															<option value="1" >停用</option>
															<option value="0" >启用</option>
														</select>
													</div>
												</div>
												<div class="row" style="margin-top: 5px; margin-left: 5px; margin-right: 5px;">
													<div class="col-xs-12 col-md-12">
														描述 describe
													</div>
													<div class="col-xs-12 col-md-12" mc-ace="~">
														<textarea class="form-control" rows="3"></textarea>
													</div>
												</div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭close</button>
                                                <button type="submit" class="btn btn-primary">保存save</button>
                                            </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
    
	
<script src="../js/classie.js"></script>

<script>
	var menuLeft = document.getElementById( 'cbp-spmenu-s1' ),
		showLeftPush = document.getElementById( 'showLeftPush' ),
		body = document.body;
		
	showLeftPush.onclick = function() {
		classie.toggle( this, 'active' );
		classie.toggle( body, 'cbp-spmenu-push-toright' );
		classie.toggle( menuLeft, 'cbp-spmenu-open' );
		disableOther( 'showLeftPush' );
	};
	

	function disableOther( button ) {
		if( button !== 'showLeftPush' ) {
			classie.toggle( showLeftPush, 'disabled' );
		}
	}
	
	
	var ctxPath  = [[@{/}]];
			$(function(){
	    	  $(".update").on("click",function(){
	    		 	var id= $(this).attr("title");
		  			var rolename=$(this).parent().siblings("td:eq(1)").text();
		  			var isActive=$(this).parent().siblings("td:eq(2)").text();
	    		 	
		  			$(".roleform .id").val(id);
		  			$(".roleform .name").val(rolename);
		  			if(isActive=="启用"){
		  				$(".roleform .isActive").val(0); 
		  			}else{
		  				$(".roleform .isActive").val(1);
		  			}
	    	
	    	  });
	    	  
	    	  $(".roleform").on("submit",function(e){
	    		  e.preventDefault();
	    		  var url=ctxPath+"role/update";
	    		  var id=null;
	    		  if($(".roleform .id").val()!=null){
	    			 id=parseInt($(".roleform .id").val());
	    		     }    		  
	    		  var name=$(".roleform .name").val(); 
	    		  var isActive=$(".roleform .isActive").val();
	    		
	    		  var data={
	    				  id:id,
	    				  name:name,
	    				  isActive:isActive
	    				  }
	    		  $.ajax(
	    		      		{type:"POST",
	    		      		   url: url,
	    		      		   contentType:'application/json;charset=utf-8',
	    		      		   data:JSON.stringify(data),
	    		      		   success: function(data){	  
	    		      			 showmsg(data);	     
	    		      		   },
	    		      		  error: function (xhr) {
	    		      	        console.log(xhr);
	    		      	    } });
	    	     });
	    	  
		    	  $("#btn_select").on("click",function(){
		    		  var name=$(".searchVal1").val();
		    	      var isActive=$(".searchVal2").val();
		    	      window.location.href = ctxPath+"role/index?isActive="+isActive; 
		    	      return false;
		          });
		    	  $(".update_auth").on("click",function(){
		    		  var id= $(this).attr("title");
		    	      window.location.href = ctxPath+"role/authorization?id="+id; 
		    	      return false;
		          });
	    	  
	          });
	      

			function showmsg(data){
		    	  if(data.status>200){
				    	toastr.warning(data.msg);  
				       }
				    else{
				    	toastr.success(data.msg);
				      }
				 setTimeout(function(){
					window.location.reload();	      				 
				    },1000);
		      }
		      
		      toastr.options = {  
		    	        closeButton: false,  
		    	        debug: false,  
		    	        progressBar: false,  
		    	        positionClass: "toast-bottom-center",  
		    	        onclick: null,  
		    	        showDuration: "300",  
		    	        hideDuration: "1000",  
		    	        timeOut: "2000",  
		    	        extendedTimeOut: "1000",  
		    	        showEasing: "swing",  
		    	        hideEasing: "linear",  
		    	        showMethod: "fadeIn",  
		    	        hideMethod: "fadeOut"  
		    	    }; 
			
	      
	      
</script>	
<!--scrolling js-->
<script src="../js/jquery.nicescroll.js"></script>
<script src="../js/scripts.js"></script>
<!--//scrolling js-->

<!-- side nav js -->
<script src='../js/SidebarNav.min.js' type='text/javascript'></script>
<script>
     $('.sidebar-menu').SidebarNav()
   </script>	
<script src="../js/SimpleChart.js"></script>
<script src="../js/bootstrap.js"> </script>	
   
<!--  js -->  
<script src="../pageJs/roleManage.js"></script>
</body>
</html>